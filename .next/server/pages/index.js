/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/index";
exports.ids = ["pages/index"];
exports.modules = {

/***/ "./styles/Home.module.css":
/*!********************************!*\
  !*** ./styles/Home.module.css ***!
  \********************************/
/***/ ((module) => {

eval("// Exports\nmodule.exports = {\n\t\"main\": \"Home_main__nLjiQ\",\n\t\"description\": \"Home_description__41Owk\",\n\t\"code\": \"Home_code__suPER\",\n\t\"grid\": \"Home_grid__GxQ85\",\n\t\"card\": \"Home_card___LpL1\",\n\t\"center\": \"Home_center__4BFgC\",\n\t\"logo\": \"Home_logo__27_tb\",\n\t\"thirteen\": \"Home_thirteen__cMI_k\",\n\t\"rotate\": \"Home_rotate____XsI\",\n\t\"content\": \"Home_content__Zy02X\",\n\t\"vercelLogo\": \"Home_vercelLogo__dtSk9\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zdHlsZXMvSG9tZS5tb2R1bGUuY3NzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbWVnbGUtY2xvbmUvLi9zdHlsZXMvSG9tZS5tb2R1bGUuY3NzPzI1NGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSB7XG5cdFwibWFpblwiOiBcIkhvbWVfbWFpbl9fbkxqaVFcIixcblx0XCJkZXNjcmlwdGlvblwiOiBcIkhvbWVfZGVzY3JpcHRpb25fXzQxT3drXCIsXG5cdFwiY29kZVwiOiBcIkhvbWVfY29kZV9fc3VQRVJcIixcblx0XCJncmlkXCI6IFwiSG9tZV9ncmlkX19HeFE4NVwiLFxuXHRcImNhcmRcIjogXCJIb21lX2NhcmRfX19McEwxXCIsXG5cdFwiY2VudGVyXCI6IFwiSG9tZV9jZW50ZXJfXzRCRmdDXCIsXG5cdFwibG9nb1wiOiBcIkhvbWVfbG9nb19fMjdfdGJcIixcblx0XCJ0aGlydGVlblwiOiBcIkhvbWVfdGhpcnRlZW5fX2NNSV9rXCIsXG5cdFwicm90YXRlXCI6IFwiSG9tZV9yb3RhdGVfX19fWHNJXCIsXG5cdFwiY29udGVudFwiOiBcIkhvbWVfY29udGVudF9fWnkwMlhcIixcblx0XCJ2ZXJjZWxMb2dvXCI6IFwiSG9tZV92ZXJjZWxMb2dvX19kdFNrOVwiXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./styles/Home.module.css\n");

/***/ }),

/***/ "./pages/index.tsx":
/*!*************************!*\
  !*** ./pages/index.tsx ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"VideoPlayer\": () => (/* binding */ VideoPlayer),\n/* harmony export */   \"default\": () => (/* binding */ Home)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/head */ \"next/head\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _styles_Home_module_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/Home.module.css */ \"./styles/Home.module.css\");\n/* harmony import */ var _styles_Home_module_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styles_Home_module_css__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nfunction createRoom(userId) {\n    return fetch(`/api/rooms?userId=${userId}`, {\n        method: \"POST\"\n    }).then((response)=>response.json());\n}\nfunction getRandomRoom(userId) {\n    return fetch(`/api/rooms?userId=${userId}`).then((response)=>response.json());\n}\nfunction setRoomToWaiting(roomId) {\n    return fetch(`/api/rooms/${roomId}`, {\n        method: \"PUT\"\n    }).then((response)=>response.json());\n}\nconst VideoPlayer = ({ videoTrack , style  })=>{\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        const playerRef = ref.current;\n        if (!videoTrack) return;\n        if (!playerRef) return;\n        videoTrack.play(playerRef);\n        return ()=>{\n            videoTrack.stop();\n        };\n    }, [\n        videoTrack\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: ref,\n        style: style\n    }, void 0, false, {\n        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n        lineNumber: 73,\n        columnNumber: 10\n    }, undefined);\n};\nasync function connectToAgoraRtc(roomId, userId, onVideoConnect, onWebcamStart, onAudioConnect, token) {\n    const { default: AgoraRTC  } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! agora-rtc-sdk-ng */ \"agora-rtc-sdk-ng\", 23));\n    const client = AgoraRTC.createClient({\n        mode: \"rtc\",\n        codec: \"vp8\"\n    });\n    await client.join(\"f84852acf83c43938bac98f4bfbd1e94\", roomId, token, userId);\n    client.on(\"user-left\", async (user)=>{\n        console.log(`User left: ${user.uid}`);\n        // Call function to set room status to waiting\n        await setRoomToWaiting(roomId);\n    // Optionally, you can also notify the remaining user or perform other cleanup actions here\n    });\n    client.on(\"user-published\", (themUser, mediaType)=>{\n        client.subscribe(themUser, mediaType).then(()=>{\n            if (mediaType === \"video\") {\n                onVideoConnect(themUser.videoTrack);\n            }\n            if (mediaType === \"audio\") {\n                onAudioConnect(themUser.audioTrack);\n                themUser.audioTrack?.play();\n            }\n        });\n    });\n    const tracks = await AgoraRTC.createMicrophoneAndCameraTracks();\n    onWebcamStart(tracks[1]);\n    await client.publish(tracks);\n    return {\n        tracks,\n        client\n    };\n}\nasync function connectToAgoraRtm(roomId, userId, onMessage, token) {\n    const { default: AgoraRTM  } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! agora-rtm-sdk */ \"agora-rtm-sdk\", 23));\n    const client = AgoraRTM.createInstance(\"f84852acf83c43938bac98f4bfbd1e94\");\n    await client.login({\n        uid: userId,\n        token\n    });\n    const channel = await client.createChannel(roomId);\n    await channel.join();\n    channel.on(\"ChannelMessage\", (message, userId)=>{\n        onMessage({\n            userId,\n            message: message.text\n        });\n    });\n    return {\n        channel\n    };\n}\nfunction Home() {\n    const [userId] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(parseInt(`${Math.random() * 1e6}`) + \"\");\n    const [room, setRoom] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [themVideo, setThemVideo] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const [myVideo, setMyVideo] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const [themAudio, setThemAudio] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const channelRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)();\n    const rtcClientRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)();\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        connectToARoom(); // Automatically start chatting when component mounts\n    }, []); // Empty dependency array to run only once on mount\n    function handleNextClick() {\n        connectToARoom();\n    }\n    function handleStartChattingClicked() {\n        connectToARoom();\n    }\n    async function handleSubmitMessage(e) {\n        e.preventDefault();\n        await channelRef.current?.sendMessage({\n            text: input\n        });\n        setMessages((cur)=>[\n                ...cur,\n                {\n                    userId,\n                    message: input\n                }\n            ]);\n        setInput(\"\");\n    }\n    async function connectToARoom() {\n        setThemAudio(undefined);\n        setThemVideo(undefined);\n        setMyVideo(undefined);\n        setMessages([]);\n        if (channelRef.current) {\n            await channelRef.current.leave();\n        }\n        if (rtcClientRef.current) {\n            rtcClientRef.current.leave();\n        }\n        const { rooms , rtcToken , rtmToken  } = await getRandomRoom(userId);\n        if (room) {\n            setRoomToWaiting(room._id);\n        }\n        if (rooms.length > 0) {\n            setRoom(rooms[0]);\n            const { channel  } = await connectToAgoraRtm(rooms[0]._id, userId, (message)=>setMessages((cur)=>[\n                        ...cur,\n                        message\n                    ]), rtmToken);\n            channelRef.current = channel;\n            const { tracks , client  } = await connectToAgoraRtc(rooms[0]._id, userId, (themVideo)=>setThemVideo(themVideo), (myVideo)=>setMyVideo(myVideo), (themAudio)=>setThemAudio(themAudio), rtcToken);\n            rtcClientRef.current = client;\n        } else {\n            const { room: room1 , rtcToken: rtcToken1 , rtmToken: rtmToken1  } = await createRoom(userId);\n            setRoom(room1);\n            const { channel: channel1  } = await connectToAgoraRtm(room1._id, userId, (message)=>setMessages((cur)=>[\n                        ...cur,\n                        message\n                    ]), rtmToken1);\n            channelRef.current = channel1;\n            const { tracks: tracks1 , client: client1  } = await connectToAgoraRtc(room1._id, userId, (themVideo)=>setThemVideo(themVideo), (myVideo)=>setMyVideo(myVideo), (themAudio)=>setThemAudio(themAudio), rtcToken1);\n            rtcClientRef.current = client1;\n        }\n    }\n    function convertToYouThem(message) {\n        return message.userId === userId ? \"You\" : \"Them\";\n    }\n    const isChatting = room;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_1___default()), {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                        children: \"Cyber Mingle\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                        lineNumber: 259,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"description\",\n                        content: \"Meet with other personas!\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                        lineNumber: 260,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"viewport\",\n                        content: \"width=device-width, initial-scale=1\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                        lineNumber: 261,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"icon\",\n                        href: \"/favicon.ico\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                        lineNumber: 262,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                lineNumber: 258,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: (_styles_Home_module_css__WEBPACK_IMPORTED_MODULE_3___default().main),\n                children: isChatting ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"chat-window\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"video-panel\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"video-stream\",\n                                        children: myVideo && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(VideoPlayer, {\n                                            style: {\n                                                width: \"100%\",\n                                                height: \"100%\"\n                                            },\n                                            videoTrack: myVideo\n                                        }, void 0, false, {\n                                            fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                                            lineNumber: 273,\n                                            columnNumber: 21\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                                        lineNumber: 271,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"video-stream\",\n                                        children: themVideo && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(VideoPlayer, {\n                                            style: {\n                                                width: \"100%\",\n                                                height: \"100%\"\n                                            },\n                                            videoTrack: themVideo\n                                        }, void 0, false, {\n                                            fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                                            lineNumber: 281,\n                                            columnNumber: 21\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                                        lineNumber: 279,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                                lineNumber: 270,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"next-button\",\n                                onClick: handleNextClick,\n                                children: \"Next\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                                lineNumber: 289,\n                                columnNumber: 15\n                            }, this),\n                            \"room id: \",\n                            room._id,\n                            \" status: \",\n                            room.status\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                        lineNumber: 269,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handleStartChattingClicked,\n                        children: \"Start Chatting\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                        lineNumber: 297,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false)\n            }, void 0, false, {\n                fileName: \"/Users/kaan/Desktop/cyber/pages/index.tsx\",\n                lineNumber: 265,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC50c3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQTZCO0FBQzhCO0FBQ1o7QUErQi9DLFNBQVNNLFdBQVdDLE1BQWMsRUFBZ0M7SUFDaEUsT0FBT0MsTUFBTSxDQUFDLGtCQUFrQixFQUFFRCxPQUFPLENBQUMsRUFBRTtRQUMxQ0UsUUFBUTtJQUNWLEdBQUdDLElBQUksQ0FBQyxDQUFDQyxXQUFhQSxTQUFTQyxJQUFJO0FBQ3JDO0FBRUEsU0FBU0MsY0FBY04sTUFBYyxFQUFtQztJQUN0RSxPQUFPQyxNQUFNLENBQUMsa0JBQWtCLEVBQUVELE9BQU8sQ0FBQyxFQUFFRyxJQUFJLENBQUMsQ0FBQ0MsV0FDaERBLFNBQVNDLElBQUk7QUFFakI7QUFFQSxTQUFTRSxpQkFBaUJDLE1BQWMsRUFBRTtJQUN4QyxPQUFPUCxNQUFNLENBQUMsV0FBVyxFQUFFTyxPQUFPLENBQUMsRUFBRTtRQUFFTixRQUFRO0lBQU0sR0FBR0MsSUFBSSxDQUFDLENBQUNDLFdBQzVEQSxTQUFTQyxJQUFJO0FBRWpCO0FBRU8sTUFBTUksY0FBYyxDQUFDLEVBQzFCQyxXQUFVLEVBQ1ZDLE1BQUssRUFJTixHQUFLO0lBQ0osTUFBTUMsTUFBTWhCLDZDQUFNQSxDQUFDLElBQUk7SUFFdkJELGdEQUFTQSxDQUFDLElBQU07UUFDZCxNQUFNa0IsWUFBWUQsSUFBSUUsT0FBTztRQUM3QixJQUFJLENBQUNKLFlBQVk7UUFDakIsSUFBSSxDQUFDRyxXQUFXO1FBRWhCSCxXQUFXSyxJQUFJLENBQUNGO1FBRWhCLE9BQU8sSUFBTTtZQUNYSCxXQUFXTSxJQUFJO1FBQ2pCO0lBQ0YsR0FBRztRQUFDTjtLQUFXO0lBRWYscUJBQU8sOERBQUNPO1FBQUlMLEtBQUtBO1FBQUtELE9BQU9BOzs7Ozs7QUFDL0IsRUFBRTtBQUVGLGVBQWVPLGtCQUNiVixNQUFjLEVBQ2RSLE1BQWMsRUFDZG1CLGNBQW1CLEVBQ25CQyxhQUFrQixFQUNsQkMsY0FBbUIsRUFDbkJDLEtBQWEsRUFDYjtJQUNBLE1BQU0sRUFBRUMsU0FBU0MsU0FBUSxFQUFFLEdBQUcsTUFBTSxzSUFBMEI7SUFFOUQsTUFBTUMsU0FBU0QsU0FBU0UsWUFBWSxDQUFDO1FBQ25DQyxNQUFNO1FBQ05DLE9BQU87SUFDVDtJQUVBLE1BQU1ILE9BQU9JLElBQUksQ0FDZkMsa0NBQW9DLEVBQ3BDdEIsUUFDQWMsT0FDQXRCO0lBR0Z5QixPQUFPUSxFQUFFLENBQUMsYUFBYSxPQUFPQyxPQUFTO1FBQ3JDQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUVGLEtBQUtHLEdBQUcsQ0FBQyxDQUFDO1FBQ3BDLDhDQUE4QztRQUM5QyxNQUFNOUIsaUJBQWlCQztJQUN2QiwyRkFBMkY7SUFDN0Y7SUFFQWlCLE9BQU9RLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQ0ssVUFBVUMsWUFBYztRQUNuRGQsT0FBT2UsU0FBUyxDQUFDRixVQUFVQyxXQUFXcEMsSUFBSSxDQUFDLElBQU07WUFDL0MsSUFBSW9DLGNBQWMsU0FBUztnQkFDekJwQixlQUFlbUIsU0FBUzVCLFVBQVU7WUFDcEMsQ0FBQztZQUNELElBQUk2QixjQUFjLFNBQVM7Z0JBQ3pCbEIsZUFBZWlCLFNBQVNHLFVBQVU7Z0JBQ2xDSCxTQUFTRyxVQUFVLEVBQUUxQjtZQUN2QixDQUFDO1FBQ0g7SUFDRjtJQUVBLE1BQU0yQixTQUFTLE1BQU1sQixTQUFTbUIsK0JBQStCO0lBQzdEdkIsY0FBY3NCLE1BQU0sQ0FBQyxFQUFFO0lBQ3ZCLE1BQU1qQixPQUFPbUIsT0FBTyxDQUFDRjtJQUVyQixPQUFPO1FBQUVBO1FBQVFqQjtJQUFPO0FBQzFCO0FBRUEsZUFBZW9CLGtCQUNickMsTUFBYyxFQUNkUixNQUFjLEVBQ2Q4QyxTQUFzQyxFQUN0Q3hCLEtBQWEsRUFDYjtJQUNBLE1BQU0sRUFBRUMsU0FBU3dCLFNBQVEsRUFBRSxHQUFHLE1BQU0sZ0lBQXVCO0lBQzNELE1BQU10QixTQUFTc0IsU0FBU0MsY0FBYyxDQUFDbEIsa0NBQW9DO0lBQzNFLE1BQU1MLE9BQU93QixLQUFLLENBQUM7UUFDakJaLEtBQUtyQztRQUNMc0I7SUFDRjtJQUNBLE1BQU00QixVQUFVLE1BQU16QixPQUFPMEIsYUFBYSxDQUFDM0M7SUFDM0MsTUFBTTBDLFFBQVFyQixJQUFJO0lBQ2xCcUIsUUFBUWpCLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQ21CLFNBQVNwRCxTQUFXO1FBQ2hEOEMsVUFBVTtZQUNSOUM7WUFDQW9ELFNBQVNBLFFBQVFDLElBQUk7UUFDdkI7SUFDRjtJQUVBLE9BQU87UUFDTEg7SUFDRjtBQUNGO0FBRWUsU0FBU0ksT0FBTztJQUM3QixNQUFNLENBQUN0RCxPQUFPLEdBQUdILCtDQUFRQSxDQUFDMEQsU0FBUyxDQUFDLEVBQUVDLEtBQUtDLE1BQU0sS0FBSyxJQUFJLENBQUMsSUFBSTtJQUMvRCxNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBRzlELCtDQUFRQTtJQUNoQyxNQUFNLENBQUMrRCxVQUFVQyxZQUFZLEdBQUdoRSwrQ0FBUUEsQ0FBYSxFQUFFO0lBQ3ZELE1BQU0sQ0FBQ2lFLE9BQU9DLFNBQVMsR0FBR2xFLCtDQUFRQSxDQUFDO0lBQ25DLE1BQU0sQ0FBQ21FLFdBQVdDLGFBQWEsR0FBR3BFLCtDQUFRQTtJQUMxQyxNQUFNLENBQUNxRSxTQUFTQyxXQUFXLEdBQUd0RSwrQ0FBUUE7SUFDdEMsTUFBTSxDQUFDdUUsV0FBV0MsYUFBYSxHQUFHeEUsK0NBQVFBO0lBQzFDLE1BQU15RSxhQUFhMUUsNkNBQU1BO0lBQ3pCLE1BQU0yRSxlQUFlM0UsNkNBQU1BO0lBRTNCRCxnREFBU0EsQ0FBQyxJQUFNO1FBQ2Q2RSxrQkFBa0IscURBQXFEO0lBQ3pFLEdBQUcsRUFBRSxHQUFHLG1EQUFtRDtJQUUzRCxTQUFTQyxrQkFBa0I7UUFDekJEO0lBQ0Y7SUFFQSxTQUFTRSw2QkFBNkI7UUFDcENGO0lBQ0Y7SUFFQSxlQUFlRyxvQkFBb0JDLENBQWtCLEVBQUU7UUFDckRBLEVBQUVDLGNBQWM7UUFDaEIsTUFBTVAsV0FBV3hELE9BQU8sRUFBRWdFLFlBQVk7WUFDcEN6QixNQUFNUztRQUNSO1FBQ0FELFlBQVksQ0FBQ2tCLE1BQVE7bUJBQ2hCQTtnQkFDSDtvQkFDRS9FO29CQUNBb0QsU0FBU1U7Z0JBQ1g7YUFDRDtRQUNEQyxTQUFTO0lBQ1g7SUFFQSxlQUFlUyxpQkFBaUI7UUFDOUJILGFBQWFXO1FBQ2JmLGFBQWFlO1FBQ2JiLFdBQVdhO1FBQ1huQixZQUFZLEVBQUU7UUFFZCxJQUFJUyxXQUFXeEQsT0FBTyxFQUFFO1lBQ3RCLE1BQU13RCxXQUFXeEQsT0FBTyxDQUFDbUUsS0FBSztRQUNoQyxDQUFDO1FBRUQsSUFBSVYsYUFBYXpELE9BQU8sRUFBRTtZQUN4QnlELGFBQWF6RCxPQUFPLENBQUNtRSxLQUFLO1FBQzVCLENBQUM7UUFFRCxNQUFNLEVBQUVDLE1BQUssRUFBRUMsU0FBUSxFQUFFQyxTQUFRLEVBQUUsR0FBRyxNQUFNOUUsY0FBY047UUFFMUQsSUFBSTBELE1BQU07WUFDUm5ELGlCQUFpQm1ELEtBQUsyQixHQUFHO1FBQzNCLENBQUM7UUFFRCxJQUFJSCxNQUFNSSxNQUFNLEdBQUcsR0FBRztZQUNwQjNCLFFBQVF1QixLQUFLLENBQUMsRUFBRTtZQUNoQixNQUFNLEVBQUVoQyxRQUFPLEVBQUUsR0FBRyxNQUFNTCxrQkFDeEJxQyxLQUFLLENBQUMsRUFBRSxDQUFDRyxHQUFHLEVBQ1pyRixRQUNBLENBQUNvRCxVQUFzQlMsWUFBWSxDQUFDa0IsTUFBUTsyQkFBSUE7d0JBQUszQjtxQkFBUSxHQUM3RGdDO1lBRUZkLFdBQVd4RCxPQUFPLEdBQUdvQztZQUVyQixNQUFNLEVBQUVSLE9BQU0sRUFBRWpCLE9BQU0sRUFBRSxHQUFHLE1BQU1QLGtCQUMvQmdFLEtBQUssQ0FBQyxFQUFFLENBQUNHLEdBQUcsRUFDWnJGLFFBQ0EsQ0FBQ2dFLFlBQWlDQyxhQUFhRCxZQUMvQyxDQUFDRSxVQUErQkMsV0FBV0QsVUFDM0MsQ0FBQ0UsWUFBaUNDLGFBQWFELFlBQy9DZTtZQUVGWixhQUFhekQsT0FBTyxHQUFHVztRQUN6QixPQUFPO1lBQ0wsTUFBTSxFQUFFaUMsTUFBQUEsTUFBSSxFQUFFeUIsVUFBQUEsVUFBUSxFQUFFQyxVQUFBQSxVQUFRLEVBQUUsR0FBRyxNQUFNckYsV0FBV0M7WUFDdEQyRCxRQUFRRDtZQUNSLE1BQU0sRUFBRVIsU0FBQUEsU0FBTyxFQUFFLEdBQUcsTUFBTUwsa0JBQ3hCYSxNQUFLMkIsR0FBRyxFQUNSckYsUUFDQSxDQUFDb0QsVUFBc0JTLFlBQVksQ0FBQ2tCLE1BQVE7MkJBQUlBO3dCQUFLM0I7cUJBQVEsR0FDN0RnQztZQUVGZCxXQUFXeEQsT0FBTyxHQUFHb0M7WUFFckIsTUFBTSxFQUFFUixRQUFBQSxRQUFNLEVBQUVqQixRQUFBQSxRQUFNLEVBQUUsR0FBRyxNQUFNUCxrQkFDL0J3QyxNQUFLMkIsR0FBRyxFQUNSckYsUUFDQSxDQUFDZ0UsWUFBaUNDLGFBQWFELFlBQy9DLENBQUNFLFVBQStCQyxXQUFXRCxVQUMzQyxDQUFDRSxZQUFpQ0MsYUFBYUQsWUFDL0NlO1lBRUZaLGFBQWF6RCxPQUFPLEdBQUdXO1FBQ3pCLENBQUM7SUFDSDtJQUVBLFNBQVM4RCxpQkFBaUJuQyxPQUFpQixFQUFFO1FBQzNDLE9BQU9BLFFBQVFwRCxNQUFNLEtBQUtBLFNBQVMsUUFBUSxNQUFNO0lBQ25EO0lBRUEsTUFBTXdGLGFBQWE5QjtJQUVuQixxQkFDRTs7MEJBQ0UsOERBQUNqRSxrREFBSUE7O2tDQUNILDhEQUFDZ0c7a0NBQU07Ozs7OztrQ0FDUCw4REFBQ0M7d0JBQUtDLE1BQUs7d0JBQWNDLFNBQVE7Ozs7OztrQ0FDakMsOERBQUNGO3dCQUFLQyxNQUFLO3dCQUFXQyxTQUFROzs7Ozs7a0NBQzlCLDhEQUFDQzt3QkFBS0MsS0FBSTt3QkFBT0MsTUFBSzs7Ozs7Ozs7Ozs7OzBCQUd4Qiw4REFBQ0M7Z0JBQUtDLFdBQVduRyxxRUFBVzswQkFDekIwRiwyQkFDQzs4QkFFRSw0RUFBQ3ZFO3dCQUFJZ0YsV0FBVTs7MENBQ2IsOERBQUNoRjtnQ0FBSWdGLFdBQVU7O2tEQUNiLDhEQUFDaEY7d0NBQUlnRixXQUFVO2tEQUNaL0IseUJBQ0MsOERBQUN6RDs0Q0FDQ0UsT0FBTztnREFBRXVGLE9BQU87Z0RBQVFDLFFBQVE7NENBQU87NENBQ3ZDekYsWUFBWXdEOzs7Ozs7Ozs7OztrREFJbEIsOERBQUNqRDt3Q0FBSWdGLFdBQVU7a0RBQ1pqQywyQkFDQyw4REFBQ3ZEOzRDQUNDRSxPQUFPO2dEQUFFdUYsT0FBTztnREFBUUMsUUFBUTs0Q0FBTzs0Q0FDdkN6RixZQUFZc0Q7Ozs7Ozs7Ozs7Ozs7Ozs7OzBDQU1wQiw4REFBQ29DO2dDQUFPSCxXQUFVO2dDQUFjSSxTQUFTNUI7MENBQWlCOzs7Ozs7NEJBQWE7NEJBQzlEZixLQUFLMkIsR0FBRzs0QkFBQzs0QkFBVTNCLEtBQUs0QyxNQUFNOzs7Ozs7O2tEQU0zQzs4QkFDRSw0RUFBQ0Y7d0JBQU9DLFNBQVMzQjtrQ0FBNEI7Ozs7OztpQ0FFaEQ7Ozs7Ozs7O0FBSVQsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL29tZWdsZS1jbG9uZS8uL3BhZ2VzL2luZGV4LnRzeD8wN2ZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBIZWFkIGZyb20gXCJuZXh0L2hlYWRcIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBzdHlsZXMgZnJvbSBcIi4uL3N0eWxlcy9Ib21lLm1vZHVsZS5jc3NcIjtcbmltcG9ydCB7IFJ0bUNoYW5uZWwgfSBmcm9tIFwiYWdvcmEtcnRtLXNka1wiO1xuaW1wb3J0IHtcbiAgSUNhbWVyYVZpZGVvVHJhY2ssXG4gIElSZW1vdGVWaWRlb1RyYWNrLFxuICBJQWdvcmFSVENDbGllbnQsXG4gIElSZW1vdGVBdWRpb1RyYWNrLFxufSBmcm9tIFwiYWdvcmEtcnRjLXNkay1uZ1wiO1xuXG50eXBlIFRDcmVhdGVSb29tUmVzcG9uc2UgPSB7XG4gIHJvb206IFJvb207XG4gIHJ0Y1Rva2VuOiBzdHJpbmc7XG4gIHJ0bVRva2VuOiBzdHJpbmc7XG59O1xuXG50eXBlIFRHZXRSYW5kb21Sb29tUmVzcG9uc2UgPSB7XG4gIHJ0Y1Rva2VuOiBzdHJpbmc7XG4gIHJ0bVRva2VuOiBzdHJpbmc7XG4gIHJvb21zOiBSb29tW107XG59O1xuXG50eXBlIFJvb20gPSB7XG4gIF9pZDogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbn07XG5cbnR5cGUgVE1lc3NhZ2UgPSB7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVSb29tKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxUQ3JlYXRlUm9vbVJlc3BvbnNlPiB7XG4gIHJldHVybiBmZXRjaChgL2FwaS9yb29tcz91c2VySWQ9JHt1c2VySWR9YCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21Sb29tKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxUR2V0UmFuZG9tUm9vbVJlc3BvbnNlPiB7XG4gIHJldHVybiBmZXRjaChgL2FwaS9yb29tcz91c2VySWQ9JHt1c2VySWR9YCkudGhlbigocmVzcG9uc2UpID0+XG4gICAgcmVzcG9uc2UuanNvbigpXG4gICk7XG59XG5cbmZ1bmN0aW9uIHNldFJvb21Ub1dhaXRpbmcocm9vbUlkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGZldGNoKGAvYXBpL3Jvb21zLyR7cm9vbUlkfWAsIHsgbWV0aG9kOiBcIlBVVFwiIH0pLnRoZW4oKHJlc3BvbnNlKSA9PlxuICAgIHJlc3BvbnNlLmpzb24oKVxuICApO1xufVxuXG5leHBvcnQgY29uc3QgVmlkZW9QbGF5ZXIgPSAoe1xuICB2aWRlb1RyYWNrLFxuICBzdHlsZSxcbn06IHtcbiAgdmlkZW9UcmFjazogSVJlbW90ZVZpZGVvVHJhY2sgfCBJQ2FtZXJhVmlkZW9UcmFjaztcbiAgc3R5bGU6IG9iamVjdDtcbn0pID0+IHtcbiAgY29uc3QgcmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcGxheWVyUmVmID0gcmVmLmN1cnJlbnQ7XG4gICAgaWYgKCF2aWRlb1RyYWNrKSByZXR1cm47XG4gICAgaWYgKCFwbGF5ZXJSZWYpIHJldHVybjtcblxuICAgIHZpZGVvVHJhY2sucGxheShwbGF5ZXJSZWYpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHZpZGVvVHJhY2suc3RvcCgpO1xuICAgIH07XG4gIH0sIFt2aWRlb1RyYWNrXSk7XG5cbiAgcmV0dXJuIDxkaXYgcmVmPXtyZWZ9IHN0eWxlPXtzdHlsZX0+PC9kaXY+O1xufTtcblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvQWdvcmFSdGMoXG4gIHJvb21JZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgb25WaWRlb0Nvbm5lY3Q6IGFueSxcbiAgb25XZWJjYW1TdGFydDogYW55LFxuICBvbkF1ZGlvQ29ubmVjdDogYW55LFxuICB0b2tlbjogc3RyaW5nXG4pIHtcbiAgY29uc3QgeyBkZWZhdWx0OiBBZ29yYVJUQyB9ID0gYXdhaXQgaW1wb3J0KFwiYWdvcmEtcnRjLXNkay1uZ1wiKTtcblxuICBjb25zdCBjbGllbnQgPSBBZ29yYVJUQy5jcmVhdGVDbGllbnQoe1xuICAgIG1vZGU6IFwicnRjXCIsXG4gICAgY29kZWM6IFwidnA4XCIsXG4gIH0pO1xuXG4gIGF3YWl0IGNsaWVudC5qb2luKFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FHT1JBX0FQUF9JRCEsXG4gICAgcm9vbUlkLFxuICAgIHRva2VuLFxuICAgIHVzZXJJZFxuICApO1xuXG4gIGNsaWVudC5vbihcInVzZXItbGVmdFwiLCBhc3luYyAodXNlcikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBVc2VyIGxlZnQ6ICR7dXNlci51aWR9YCk7XG4gICAgLy8gQ2FsbCBmdW5jdGlvbiB0byBzZXQgcm9vbSBzdGF0dXMgdG8gd2FpdGluZ1xuICAgIGF3YWl0IHNldFJvb21Ub1dhaXRpbmcocm9vbUlkKTtcbiAgICAvLyBPcHRpb25hbGx5LCB5b3UgY2FuIGFsc28gbm90aWZ5IHRoZSByZW1haW5pbmcgdXNlciBvciBwZXJmb3JtIG90aGVyIGNsZWFudXAgYWN0aW9ucyBoZXJlXG4gIH0pO1xuXG4gIGNsaWVudC5vbihcInVzZXItcHVibGlzaGVkXCIsICh0aGVtVXNlciwgbWVkaWFUeXBlKSA9PiB7XG4gICAgY2xpZW50LnN1YnNjcmliZSh0aGVtVXNlciwgbWVkaWFUeXBlKS50aGVuKCgpID0+IHtcbiAgICAgIGlmIChtZWRpYVR5cGUgPT09IFwidmlkZW9cIikge1xuICAgICAgICBvblZpZGVvQ29ubmVjdCh0aGVtVXNlci52aWRlb1RyYWNrKTtcbiAgICAgIH1cbiAgICAgIGlmIChtZWRpYVR5cGUgPT09IFwiYXVkaW9cIikge1xuICAgICAgICBvbkF1ZGlvQ29ubmVjdCh0aGVtVXNlci5hdWRpb1RyYWNrKTtcbiAgICAgICAgdGhlbVVzZXIuYXVkaW9UcmFjaz8ucGxheSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCB0cmFja3MgPSBhd2FpdCBBZ29yYVJUQy5jcmVhdGVNaWNyb3Bob25lQW5kQ2FtZXJhVHJhY2tzKCk7XG4gIG9uV2ViY2FtU3RhcnQodHJhY2tzWzFdKTtcbiAgYXdhaXQgY2xpZW50LnB1Ymxpc2godHJhY2tzKTtcblxuICByZXR1cm4geyB0cmFja3MsIGNsaWVudCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0VG9BZ29yYVJ0bShcbiAgcm9vbUlkOiBzdHJpbmcsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBvbk1lc3NhZ2U6IChtZXNzYWdlOiBUTWVzc2FnZSkgPT4gdm9pZCxcbiAgdG9rZW46IHN0cmluZ1xuKSB7XG4gIGNvbnN0IHsgZGVmYXVsdDogQWdvcmFSVE0gfSA9IGF3YWl0IGltcG9ydChcImFnb3JhLXJ0bS1zZGtcIik7XG4gIGNvbnN0IGNsaWVudCA9IEFnb3JhUlRNLmNyZWF0ZUluc3RhbmNlKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FHT1JBX0FQUF9JRCEpO1xuICBhd2FpdCBjbGllbnQubG9naW4oe1xuICAgIHVpZDogdXNlcklkLFxuICAgIHRva2VuLFxuICB9KTtcbiAgY29uc3QgY2hhbm5lbCA9IGF3YWl0IGNsaWVudC5jcmVhdGVDaGFubmVsKHJvb21JZCk7XG4gIGF3YWl0IGNoYW5uZWwuam9pbigpO1xuICBjaGFubmVsLm9uKFwiQ2hhbm5lbE1lc3NhZ2VcIiwgKG1lc3NhZ2UsIHVzZXJJZCkgPT4ge1xuICAgIG9uTWVzc2FnZSh7XG4gICAgICB1c2VySWQsXG4gICAgICBtZXNzYWdlOiBtZXNzYWdlLnRleHQsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgY2hhbm5lbCxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG9tZSgpIHtcbiAgY29uc3QgW3VzZXJJZF0gPSB1c2VTdGF0ZShwYXJzZUludChgJHtNYXRoLnJhbmRvbSgpICogMWU2fWApICsgXCJcIik7XG4gIGNvbnN0IFtyb29tLCBzZXRSb29tXSA9IHVzZVN0YXRlPFJvb20gfCB1bmRlZmluZWQ+KCk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8VE1lc3NhZ2VbXT4oW10pO1xuICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbdGhlbVZpZGVvLCBzZXRUaGVtVmlkZW9dID0gdXNlU3RhdGU8SVJlbW90ZVZpZGVvVHJhY2s+KCk7XG4gIGNvbnN0IFtteVZpZGVvLCBzZXRNeVZpZGVvXSA9IHVzZVN0YXRlPElDYW1lcmFWaWRlb1RyYWNrPigpO1xuICBjb25zdCBbdGhlbUF1ZGlvLCBzZXRUaGVtQXVkaW9dID0gdXNlU3RhdGU8SVJlbW90ZUF1ZGlvVHJhY2s+KCk7XG4gIGNvbnN0IGNoYW5uZWxSZWYgPSB1c2VSZWY8UnRtQ2hhbm5lbD4oKTtcbiAgY29uc3QgcnRjQ2xpZW50UmVmID0gdXNlUmVmPElBZ29yYVJUQ0NsaWVudD4oKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbm5lY3RUb0FSb29tKCk7IC8vIEF1dG9tYXRpY2FsbHkgc3RhcnQgY2hhdHRpbmcgd2hlbiBjb21wb25lbnQgbW91bnRzXG4gIH0sIFtdKTsgLy8gRW1wdHkgZGVwZW5kZW5jeSBhcnJheSB0byBydW4gb25seSBvbmNlIG9uIG1vdW50XG5cbiAgZnVuY3Rpb24gaGFuZGxlTmV4dENsaWNrKCkge1xuICAgIGNvbm5lY3RUb0FSb29tKCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVTdGFydENoYXR0aW5nQ2xpY2tlZCgpIHtcbiAgICBjb25uZWN0VG9BUm9vbSgpO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlU3VibWl0TWVzc2FnZShlOiBSZWFjdC5Gb3JtRXZlbnQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgYXdhaXQgY2hhbm5lbFJlZi5jdXJyZW50Py5zZW5kTWVzc2FnZSh7XG4gICAgICB0ZXh0OiBpbnB1dCxcbiAgICB9KTtcbiAgICBzZXRNZXNzYWdlcygoY3VyKSA9PiBbXG4gICAgICAuLi5jdXIsXG4gICAgICB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgbWVzc2FnZTogaW5wdXQsXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHNldElucHV0KFwiXCIpO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvQVJvb20oKSB7XG4gICAgc2V0VGhlbUF1ZGlvKHVuZGVmaW5lZCk7XG4gICAgc2V0VGhlbVZpZGVvKHVuZGVmaW5lZCk7XG4gICAgc2V0TXlWaWRlbyh1bmRlZmluZWQpO1xuICAgIHNldE1lc3NhZ2VzKFtdKTtcblxuICAgIGlmIChjaGFubmVsUmVmLmN1cnJlbnQpIHtcbiAgICAgIGF3YWl0IGNoYW5uZWxSZWYuY3VycmVudC5sZWF2ZSgpO1xuICAgIH1cblxuICAgIGlmIChydGNDbGllbnRSZWYuY3VycmVudCkge1xuICAgICAgcnRjQ2xpZW50UmVmLmN1cnJlbnQubGVhdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHJvb21zLCBydGNUb2tlbiwgcnRtVG9rZW4gfSA9IGF3YWl0IGdldFJhbmRvbVJvb20odXNlcklkKTtcblxuICAgIGlmIChyb29tKSB7XG4gICAgICBzZXRSb29tVG9XYWl0aW5nKHJvb20uX2lkKTtcbiAgICB9XG5cbiAgICBpZiAocm9vbXMubGVuZ3RoID4gMCkge1xuICAgICAgc2V0Um9vbShyb29tc1swXSk7XG4gICAgICBjb25zdCB7IGNoYW5uZWwgfSA9IGF3YWl0IGNvbm5lY3RUb0Fnb3JhUnRtKFxuICAgICAgICByb29tc1swXS5faWQsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgKG1lc3NhZ2U6IFRNZXNzYWdlKSA9PiBzZXRNZXNzYWdlcygoY3VyKSA9PiBbLi4uY3VyLCBtZXNzYWdlXSksXG4gICAgICAgIHJ0bVRva2VuXG4gICAgICApO1xuICAgICAgY2hhbm5lbFJlZi5jdXJyZW50ID0gY2hhbm5lbDtcblxuICAgICAgY29uc3QgeyB0cmFja3MsIGNsaWVudCB9ID0gYXdhaXQgY29ubmVjdFRvQWdvcmFSdGMoXG4gICAgICAgIHJvb21zWzBdLl9pZCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICAodGhlbVZpZGVvOiBJUmVtb3RlVmlkZW9UcmFjaykgPT4gc2V0VGhlbVZpZGVvKHRoZW1WaWRlbyksXG4gICAgICAgIChteVZpZGVvOiBJQ2FtZXJhVmlkZW9UcmFjaykgPT4gc2V0TXlWaWRlbyhteVZpZGVvKSxcbiAgICAgICAgKHRoZW1BdWRpbzogSVJlbW90ZUF1ZGlvVHJhY2spID0+IHNldFRoZW1BdWRpbyh0aGVtQXVkaW8pLFxuICAgICAgICBydGNUb2tlblxuICAgICAgKTtcbiAgICAgIHJ0Y0NsaWVudFJlZi5jdXJyZW50ID0gY2xpZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7IHJvb20sIHJ0Y1Rva2VuLCBydG1Ub2tlbiB9ID0gYXdhaXQgY3JlYXRlUm9vbSh1c2VySWQpO1xuICAgICAgc2V0Um9vbShyb29tKTtcbiAgICAgIGNvbnN0IHsgY2hhbm5lbCB9ID0gYXdhaXQgY29ubmVjdFRvQWdvcmFSdG0oXG4gICAgICAgIHJvb20uX2lkLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIChtZXNzYWdlOiBUTWVzc2FnZSkgPT4gc2V0TWVzc2FnZXMoKGN1cikgPT4gWy4uLmN1ciwgbWVzc2FnZV0pLFxuICAgICAgICBydG1Ub2tlblxuICAgICAgKTtcbiAgICAgIGNoYW5uZWxSZWYuY3VycmVudCA9IGNoYW5uZWw7XG5cbiAgICAgIGNvbnN0IHsgdHJhY2tzLCBjbGllbnQgfSA9IGF3YWl0IGNvbm5lY3RUb0Fnb3JhUnRjKFxuICAgICAgICByb29tLl9pZCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICAodGhlbVZpZGVvOiBJUmVtb3RlVmlkZW9UcmFjaykgPT4gc2V0VGhlbVZpZGVvKHRoZW1WaWRlbyksXG4gICAgICAgIChteVZpZGVvOiBJQ2FtZXJhVmlkZW9UcmFjaykgPT4gc2V0TXlWaWRlbyhteVZpZGVvKSxcbiAgICAgICAgKHRoZW1BdWRpbzogSVJlbW90ZUF1ZGlvVHJhY2spID0+IHNldFRoZW1BdWRpbyh0aGVtQXVkaW8pLFxuICAgICAgICBydGNUb2tlblxuICAgICAgKTtcbiAgICAgIHJ0Y0NsaWVudFJlZi5jdXJyZW50ID0gY2xpZW50O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnZlcnRUb1lvdVRoZW0obWVzc2FnZTogVE1lc3NhZ2UpIHtcbiAgICByZXR1cm4gbWVzc2FnZS51c2VySWQgPT09IHVzZXJJZCA/IFwiWW91XCIgOiBcIlRoZW1cIjtcbiAgfVxuXG4gIGNvbnN0IGlzQ2hhdHRpbmcgPSByb29tISE7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDx0aXRsZT5DeWJlciBNaW5nbGU8L3RpdGxlPlxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiTWVldCB3aXRoIG90aGVyIHBlcnNvbmFzIVwiIC8+XG4gICAgICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MVwiIC8+XG4gICAgICAgIDxsaW5rIHJlbD1cImljb25cIiBocmVmPVwiL2Zhdmljb24uaWNvXCIgLz5cbiAgICAgIDwvSGVhZD5cblxuICAgICAgPG1haW4gY2xhc3NOYW1lPXtzdHlsZXMubWFpbn0+XG4gICAgICAgIHtpc0NoYXR0aW5nID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0LXdpbmRvd1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZGVvLXBhbmVsXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2aWRlby1zdHJlYW1cIj5cbiAgICAgICAgICAgICAgICAgIHtteVZpZGVvICYmIChcbiAgICAgICAgICAgICAgICAgICAgPFZpZGVvUGxheWVyXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgdmlkZW9UcmFjaz17bXlWaWRlb31cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2aWRlby1zdHJlYW1cIj5cbiAgICAgICAgICAgICAgICAgIHt0aGVtVmlkZW8gJiYgKFxuICAgICAgICAgICAgICAgICAgICA8VmlkZW9QbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICB2aWRlb1RyYWNrPXt0aGVtVmlkZW99XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJuZXh0LWJ1dHRvblwiIG9uQ2xpY2s9e2hhbmRsZU5leHRDbGlja30+TmV4dDwvYnV0dG9uPlxuICAgICAgICAgICAgIHJvb20gaWQ6IHtyb29tLl9pZH0gc3RhdHVzOiB7cm9vbS5zdGF0dXN9XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC8+XG4gICAgICApIDogKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVN0YXJ0Q2hhdHRpbmdDbGlja2VkfT5TdGFydCBDaGF0dGluZzwvYnV0dG9uPlxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9tYWluPlxuICAgIDwvPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkhlYWQiLCJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwic3R5bGVzIiwiY3JlYXRlUm9vbSIsInVzZXJJZCIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImdldFJhbmRvbVJvb20iLCJzZXRSb29tVG9XYWl0aW5nIiwicm9vbUlkIiwiVmlkZW9QbGF5ZXIiLCJ2aWRlb1RyYWNrIiwic3R5bGUiLCJyZWYiLCJwbGF5ZXJSZWYiLCJjdXJyZW50IiwicGxheSIsInN0b3AiLCJkaXYiLCJjb25uZWN0VG9BZ29yYVJ0YyIsIm9uVmlkZW9Db25uZWN0Iiwib25XZWJjYW1TdGFydCIsIm9uQXVkaW9Db25uZWN0IiwidG9rZW4iLCJkZWZhdWx0IiwiQWdvcmFSVEMiLCJjbGllbnQiLCJjcmVhdGVDbGllbnQiLCJtb2RlIiwiY29kZWMiLCJqb2luIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FHT1JBX0FQUF9JRCIsIm9uIiwidXNlciIsImNvbnNvbGUiLCJsb2ciLCJ1aWQiLCJ0aGVtVXNlciIsIm1lZGlhVHlwZSIsInN1YnNjcmliZSIsImF1ZGlvVHJhY2siLCJ0cmFja3MiLCJjcmVhdGVNaWNyb3Bob25lQW5kQ2FtZXJhVHJhY2tzIiwicHVibGlzaCIsImNvbm5lY3RUb0Fnb3JhUnRtIiwib25NZXNzYWdlIiwiQWdvcmFSVE0iLCJjcmVhdGVJbnN0YW5jZSIsImxvZ2luIiwiY2hhbm5lbCIsImNyZWF0ZUNoYW5uZWwiLCJtZXNzYWdlIiwidGV4dCIsIkhvbWUiLCJwYXJzZUludCIsIk1hdGgiLCJyYW5kb20iLCJyb29tIiwic2V0Um9vbSIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpbnB1dCIsInNldElucHV0IiwidGhlbVZpZGVvIiwic2V0VGhlbVZpZGVvIiwibXlWaWRlbyIsInNldE15VmlkZW8iLCJ0aGVtQXVkaW8iLCJzZXRUaGVtQXVkaW8iLCJjaGFubmVsUmVmIiwicnRjQ2xpZW50UmVmIiwiY29ubmVjdFRvQVJvb20iLCJoYW5kbGVOZXh0Q2xpY2siLCJoYW5kbGVTdGFydENoYXR0aW5nQ2xpY2tlZCIsImhhbmRsZVN1Ym1pdE1lc3NhZ2UiLCJlIiwicHJldmVudERlZmF1bHQiLCJzZW5kTWVzc2FnZSIsImN1ciIsInVuZGVmaW5lZCIsImxlYXZlIiwicm9vbXMiLCJydGNUb2tlbiIsInJ0bVRva2VuIiwiX2lkIiwibGVuZ3RoIiwiY29udmVydFRvWW91VGhlbSIsImlzQ2hhdHRpbmciLCJ0aXRsZSIsIm1ldGEiLCJuYW1lIiwiY29udGVudCIsImxpbmsiLCJyZWwiLCJocmVmIiwibWFpbiIsImNsYXNzTmFtZSIsIndpZHRoIiwiaGVpZ2h0IiwiYnV0dG9uIiwib25DbGljayIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index.tsx\n");

/***/ }),

/***/ "agora-rtc-sdk-ng":
/*!***********************************!*\
  !*** external "agora-rtc-sdk-ng" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("agora-rtc-sdk-ng");

/***/ }),

/***/ "agora-rtm-sdk":
/*!********************************!*\
  !*** external "agora-rtm-sdk" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("agora-rtm-sdk");

/***/ }),

/***/ "next/head":
/*!****************************!*\
  !*** external "next/head" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/head");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/index.tsx"));
module.exports = __webpack_exports__;

})();